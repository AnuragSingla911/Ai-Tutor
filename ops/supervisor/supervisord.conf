[supervisord]
logfile=/var/log/supervisord.log
pidfile=/var/run/supervisord.pid
nodaemon=true

[program:postgres]
command=/usr/lib/postgresql/16/bin/postgres -D /var/lib/postgresql/data
priority=10
autorestart=true

[program:mongodb]
command=/usr/bin/mongod --dbpath /var/lib/mongodb --bind_ip 127.0.0.1
priority=10
autorestart=true

[program:redis]
command=/usr/bin/redis-server /etc/redis/redis.conf
priority=10
autorestart=true

[program:backend]
command=node /app/backend/src/index.js
directory=/app/backend
priority=20
autorestart=true

[program:agent]
command=uvicorn src.main:app --host 127.0.0.1 --port 8000
directory=/app/agent
priority=20
autorestart=true

[program:nginx]
command=/usr/sbin/nginx -g 'daemon off;'
priority=30
autorestart=true
